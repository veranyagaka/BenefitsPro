{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{% static 'profile.css' %}">
  <title>Profile</title>
</head>
<body>
  <button id="menu-toggle">Menu</button>
  {% include 'sidebar.html' %} 

    <div class="main-content">
      <!-- Instructions part -->
      <section class="profile-instructions">
        <h2>Profile Instructions</h2>
        <p>Follow these steps to ensure a smooth and successful application process:</p>
        <ol>
          <li>
            <b>Profile Completion:</b> Navigate through profile tabs, starting with "Personal Details," filling out all required information and leaving optional fields blank if they don't apply.
          </li>
          <li>
            <p>Dependent Information (Optional): If you have dependents and want to designate a beneficiary, please provide their information and details.</p>
          </li>
          <li>
            <p>Go to the "Documents" tab and upload all necessary supporting documents for your applications.</p>
          </li>
          <li>
            <p><b>Benefits:</b> Once your profile is complete, navigate to the "Benefits" menu and select "New Application" to apply for benefits.</p>
          </li>
          <li>
            <b>Important Note:</b> Applications missing required information (marked with a red asterisk: *) will NOT be considered. Ensure all necessary details are filled out before submitting your application.
          </li>
        </ol>
        <p>By following these instructions, you can complete your profile and submit applications for benefits efficiently.</p>
      </section>
      <!-- Ends here -->
      <div class="employee-details">
        <h2>Employee Details</h2>
        <ul class="tabs">
          <li class="tab active">Personal Details</li>
          <li class="tab">Beneficiary</li>
          <li class="tab">Dependents</li>
          <li class="tab">Documents</li>
        </ul>
        <ul class="details-list">
          <li>Date of Birth: {{ employee.date_of_birth }}</li>
          <li>Email Address: {{ employee.email_address }}</li>
          <li>Department: {{ employee.department }}</li>
          <li>Position: {{ employee.position }}</li>
          <li>Hire Date: {{ employee.hire_date }}</li>
          <li>Salary: {{ employee.salary }}</li>
          <li>Employee Status: {{ employee.get_employee_status_display }}</li>
          <li>Employee Type: {{ employee.get_employee_type_display }}</li>
        </ul>
        <div class="tab-content"></div>
      </div>
      <button id="edit-info-btn">Edit Information</button>
      <div id="edit-info-form" style="display: none;">
        <form method="post">
          {% csrf_token %}
          {{ form.as_p }}
          <button type="submit">Update Information</button>
        </form>
      </div>
      <h2>Applications</h2>
      <table>
        <thead>
          <tr>
            <th>Benefit Program</th>
            <th>Date Applied</th>
            <th>Status</th>
            <th>Documents</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <!--Working on the applications part rn -->
          {% for application in applications %}
          <tr>
            <td> {% for benefit in application.benefits.all %}
              {{ benefit.name }}{% if not forloop.last %}, {% endif %}
          {% endfor %}</td>
            <td>{{ application.date_applied }}</td>
            <td class="
            {% if application.status == 'Pending' %}
                status-pending
            {% elif application.status == 'Approved' %}
                status-approved
            {% elif application.status == 'Denied' %}
                status-denied
            {% endif %}
        ">{{ application.get_status_display }}</td>
            <td>{{ application.documents }}</td>
            <td><a href="#" class="btn">View Application</a></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

    </div>
  </div>
  <script>
    const editInfoBtn = document.getElementById('edit-info-btn');
    const editInfoForm = document.getElementById('edit-info-form');

    editInfoBtn.addEventListener('click', () => {
      editInfoForm.style.display = editInfoForm.style.display === 'none' ? 'block' : 'none';
    });

    // Tabs script
    const tabs = document.querySelectorAll('.tab');
    const tabContent = document.querySelector('.tab-content');

    tabs.forEach(tab => {
      tab.addEventListener('click', function() {
        // Remove 'active' class from all tabs
        tabs.forEach(t => t.classList.remove('active'));
        
        // Add 'active' class to the clicked tab
        this.classList.add('active');
        
        // Load content for the clicked tab (replace with your logic)
        const selectedTab = this.textContent.toLowerCase();
        // Example: Update tabContent based on selectedTab value
        tabContent.innerHTML = `You clicked the ${selectedTab} tab!`;
      });
    });
  </script>
  {% include 'footer.html' %}
</body>
</html>
